<!--
  @description       : Container for a dropdown and treegrid to display recommended badge mixes.
  @author            : Ben Learn
  @group             : 
  @last modified on  : 02-07-2023
  @last modified by  : Ben Learn
-->
<template>
    <div class="slds-box slds-var-p-around_small" style="min-height:300px">
        <div class="slds-grid slds-wrap slds-gutters" style="min-height:125px">
            <div class="slds-col slds-size_1-of-4">
                <c-dropdown label={mixLabel} value={mixValue} options={mixOptions} ondropdownchange={handleMixChange}>
                </c-dropdown>
            </div>

            <div class="slds-col slds-size_1-of-4">
                <c-dropdown label={sortLabel} value={sortValue} options={sortOptions} ondropdownchange={handleSortChange}></c-dropdown>
            </div>

            <div class="slds-col slds-size_1-of-4"></div>

            <div class="slds-col slds-size_1-of-4 slds-text-align_right">
                <template if:true={displayTable}>
                    Last Updated &nbsp;
                    <lightning-formatted-date-time value={currentLastUpdatedDate} year="numeric" month="short" day="numeric" time-zone="UTC"></lightning-formatted-date-time>
                </template>
            </div>

            <div class="slds-col slds-size_1-of-3">
                <lightning-button variant="brand" label="Expand All" onclick={handleExpandAll}></lightning-button>
                &nbsp;&nbsp;
                <lightning-button variant="brand" label="Collapse All" onclick={handleCollapseAll}></lightning-button>
            </div>
        </div>

        <template if:true={isLoading}>
            <lightning-spinner alternative-text={spinnerText}></lightning-spinner>
        </template>

        <template if:true={displayTable}>
            <div style="max-height:60vh;overflow:scroll;display:block">
                <br/>
                <c-treegrid columns={treegridColumns} treegrid-data={treegridData} key-field={keyField}></c-treegrid>
            </div>
        </template>
    </div>
</template>